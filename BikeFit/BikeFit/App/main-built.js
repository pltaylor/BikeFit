/**
 * almond 0.2.0 Copyright (c) 2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/**
 * @license RequireJS text 2.0.3 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

(function(){var e,t,n;(function(r){function o(e,t){var n,r,o,a,i,s,c,l,u,d,f=t&&t.split("/"),v=b.map,m=v&&v["*"]||{};if(e&&"."===e.charAt(0)&&t){for(f=f.slice(0,f.length-1),e=f.concat(e.split("/")),l=0;e.length>l;l+=1)if(d=e[l],"."===d)e.splice(l,1),l-=1;else if(".."===d){if(1===l&&(".."===e[2]||".."===e[0]))break;l>0&&(e.splice(l-1,2),l-=2)}e=e.join("/")}if((f||m)&&v){for(n=e.split("/"),l=n.length;l>0;l-=1){if(r=n.slice(0,l).join("/"),f)for(u=f.length;u>0;u-=1)if(o=v[f.slice(0,u).join("/")],o&&(o=o[r])){a=o,i=l;break}if(a)break;!s&&m&&m[r]&&(s=m[r],c=l)}!a&&s&&(a=s,i=c),a&&(n.splice(0,i,a),e=n.join("/"))}return e}function a(e,t){return function(){return v.apply(r,y.call(arguments,0).concat([e,t]))}}function i(e){return function(t){return o(t,e)}}function s(e){return function(t){h[e]=t}}function c(e){if(g.hasOwnProperty(e)){var t=g[e];delete g[e],w[e]=!0,f.apply(r,t)}if(!h.hasOwnProperty(e)&&!w.hasOwnProperty(e))throw Error("No "+e);return h[e]}function l(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function u(t,n,r){e.onResourceLoad&&t&&e.onResourceLoad({defined:n},{id:t},r)}function d(e){return function(){return b&&b.config&&b.config[e]||{}}}var f,v,m,p,h={},g={},b={},w={},y=[].slice;m=function(e,t){var n,r=l(e),a=r[0];return e=r[1],a&&(a=o(a,t),n=c(a)),a?e=n&&n.normalize?n.normalize(e,i(t)):o(e,t):(e=o(e,t),r=l(e),a=r[0],e=r[1],a&&(n=c(a))),{f:a?a+"!"+e:e,n:e,pr:a,p:n}},p={require:function(e){return a(e)},exports:function(e){var t=h[e];return t!==void 0?t:h[e]={}},module:function(e){return{id:e,uri:"",exports:h[e],config:d(e)}}},f=function(e,t,n,o){var i,l,d,f,v,b,y=[];if(o=o||e,"function"==typeof n){for(t=!t.length&&n.length?["require","exports","module"]:t,v=0;t.length>v;v+=1)if(f=m(t[v],o),l=f.f,"require"===l)y[v]=p.require(e);else if("exports"===l)y[v]=p.exports(e),b=!0;else if("module"===l)i=y[v]=p.module(e);else if(h.hasOwnProperty(l)||g.hasOwnProperty(l)||w.hasOwnProperty(l))y[v]=c(l);else{if(!f.p)throw Error(e+" missing "+l);f.p.load(f.n,a(o,!0),s(l),{}),y[v]=h[l]}d=n.apply(h[e],y),e&&(i&&i.exports!==r&&i.exports!==h[e]?h[e]=i.exports:d===r&&b||(h[e]=d))}else e&&(h[e]=n);u(e,h,y)},e=t=v=function(e,t,n,o,a){return"string"==typeof e?p[e]?p[e](t):c(m(e,t).f):(e.splice||(b=e,t.splice?(e=t,t=n,n=null):e=r),t=t||function(){},"function"==typeof n&&(n=o,o=a),o?f(r,e,t,n):setTimeout(function(){f(r,e,t,n)},15),v)},v.config=function(e){return b=e,v},n=function(e,t,n){t.splice||(n=t,t=[]),g[e]=[e,t,n]},n.amd={jQuery:!0}})(),n("durandal/amd/almond-custom",function(){}),n("config",[],function(){function e(e){return e+250}function t(e){return 245-e}var n="breeze/breeze",r=.22,o=[{url:"frames",moduleId:"viewmodels/frames",name:"Frames",visible:!0,caption:"Frames"},{url:"faq",moduleId:"viewmodels/faq",name:"FAQ",visible:!0,caption:'<i class="icon-question"></i> FAQ'},{url:"login",moduleId:"viewmodels/login",name:"Log In",visible:!0,caption:"Log In"}],a=[{url:"frames",moduleId:"viewmodels/frames",name:"Frames",visible:!0,caption:"Frames"},{url:"faq",moduleId:"viewmodels/faq",name:"FAQ",visible:!0,caption:'<i class="icon-question"></i> FAQ'},{url:"login",moduleId:"viewmodels/login",name:"Log In",visible:!1,caption:"Log In"},{url:"logout",moduleId:"viewmodels/logout",name:"Log Out",visible:!0,caption:"Log Out"},{url:"register",moduleId:"viewmodels/register",name:"Register",visible:!0,caption:"Register"},{url:"frameAdmin",moduleId:"viewmodels/frameAdmin",name:"Frame Admin",visible:!0,caption:'<i class="icon-plus"></i> Frame Admin'}];return{remoteServiceName:n,routes:o,routesLoggedIn:a,scalingFactor:r,xOffset:e,yOffset:t}}),n("main-built",function(){}),n("durandal/system",["require"],function(t){var n,r=!1,o=Object.keys,a=Object.prototype.hasOwnProperty,i=Object.prototype.toString,s=!1;if(Function.prototype.bind&&("object"==typeof console||"function"==typeof console)&&"object"==typeof console.log)try{["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(e){console[e]=this.call(console[e],console)},Function.prototype.bind)}catch(c){s=!0}t.on&&t.on("moduleLoaded",function(e,t){n.setModuleId(e,t)}),e!==void 0&&(e.onResourceLoad=function(e,t){n.setModuleId(e.defined[t.id],t.id)});var l=function(){},u=function(){try{if("undefined"!=typeof console&&"function"==typeof console.log)if(window.opera)for(var e=0;arguments.length>e;)console.log("Item "+(e+1)+": "+arguments[e]),e++;else 1==Array.prototype.slice.call(arguments).length&&"string"==typeof Array.prototype.slice.call(arguments)[0]?console.log(""+Array.prototype.slice.call(arguments)):console.log(Array.prototype.slice.call(arguments));else Function.prototype.bind&&!s||"undefined"==typeof console||"object"!=typeof console.log||Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments))}catch(t){}};return n={version:"1.2.0",noop:l,getModuleId:function(e){return e?"function"==typeof e?e.prototype.__moduleId__:"string"==typeof e?null:e.__moduleId__:null},setModuleId:function(e,t){return e?"function"==typeof e?(e.prototype.__moduleId__=t,void 0):("string"!=typeof e&&(e.__moduleId__=t),void 0):void 0},debug:function(e){return 1!=arguments.length?r:(r=e,r?(this.log=u,this.log("Debug mode enabled.")):(this.log("Debug mode disabled."),this.log=l),void 0)},isArray:function(e){return"[object Array]"===i.call(e)},log:l,defer:function(e){return $.Deferred(e)},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=0|16*Math.random(),n="x"==e?t:8|3&t;return n.toString(16)})},acquire:function(){var e=Array.prototype.slice.call(arguments,0);return this.defer(function(n){t(e,function(){var e=arguments;setTimeout(function(){n.resolve.apply(n,e)},1)})}).promise()}},n.keys=o||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)a.call(e,n)&&(t[t.length]=n);return t},n}),n("durandal/viewEngine",["./system"],function(e){var t;return t=$.parseHTML?function(e){return $.parseHTML(e)}:function(e){return $(e).get()},{viewExtension:".html",viewPlugin:"text",isViewUrl:function(e){return-1!==e.indexOf(this.viewExtension,e.length-this.viewExtension.length)},convertViewUrlToViewId:function(e){return e.substring(0,e.length-this.viewExtension.length)},convertViewIdToRequirePath:function(e){return this.viewPlugin+"!"+e+this.viewExtension},parseMarkup:function(e){var n=t(e);if(1==n.length)return n[0];for(var r=[],o=0;n.length>o;o++){var a=n[o];if(8!=a.nodeType){if(3==a.nodeType){var i=/\S/.test(a.nodeValue);if(!i)continue}r.push(a)}}return r.length>1?$(r).wrapAll('<div class="durandal-wrapper"></div>').parent().get(0):r[0]},createView:function(t){var n=this,r=this.convertViewIdToRequirePath(t);return e.defer(function(o){e.acquire(r).then(function(e){var r=n.parseMarkup(e);r.setAttribute("data-view",t),o.resolve(r)})}).promise()}}}),n("durandal/viewLocator",["./system","./viewEngine"],function(e,t){function n(e,t){for(var n=0;e.length>n;n++){var r=e[n],o=r.getAttribute("data-view");if(o==t)return r}}function r(e){return(e+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")}return{useConvention:function(e,t,n){e=e||"viewmodels",t=t||"views",n=n||t;var o=RegExp(r(e),"gi");this.convertModuleIdToViewId=function(e){return e.replace(o,t)},this.translateViewIdToArea=function(e,t){return t&&"partial"!=t?n+"/"+t+"/"+e:n+"/"+e}},locateViewForObject:function(t,n){var r;if(t.getView&&(r=t.getView()))return this.locateView(r,null,n);if(t.viewUrl)return this.locateView(t.viewUrl,null,n);var o=e.getModuleId(t);return o?this.locateView(this.convertModuleIdToViewId(o),null,n):this.locateView(this.determineFallbackViewId(t),null,n)},convertModuleIdToViewId:function(e){return e},determineFallbackViewId:function(e){var t=/function (.{1,})\(/,n=t.exec(""+e.constructor),r=n&&n.length>1?n[1]:"";return"views/"+r},translateViewIdToArea:function(e){return e},locateView:function(r,o,a){if("string"==typeof r){var i;if(i=t.isViewUrl(r)?t.convertViewUrlToViewId(r):r,o&&(i=this.translateViewIdToArea(i,o)),a){var s=n(a,i);if(s)return e.defer(function(e){e.resolve(s)}).promise()}return t.createView(i)}return e.defer(function(e){e.resolve(r)}).promise()}}}),n("durandal/viewModelBinder",["./system"],function(e){function t(t,a,i){if(!a||!t){if(n.throwOnErrors)throw Error(r);return e.log(r,a,t),void 0}if(!a.getAttribute){if(n.throwOnErrors)throw Error(o);return e.log(o,a,t),void 0}var s=a.getAttribute("data-view");try{e.log("Binding",s,t),n.beforeBind(t,a),i(),n.afterBind(t,a)}catch(c){if(n.throwOnErrors)throw Error(c.message+";\nView: "+s+";\nModuleId: "+e.getModuleId(t));e.log(c.message,s,t)}}var n,r="Insufficient Information to Bind",o="Unexpected View Type";return n={beforeBind:e.noop,afterBind:e.noop,bindContext:function(e,n,r){r&&(e=e.createChildContext(r)),t(e,n,function(){r&&r.beforeBind&&r.beforeBind(n),ko.applyBindings(e,n),r&&r.afterBind&&r.afterBind(n)})},bind:function(e,n){t(e,n,function(){e.beforeBind&&e.beforeBind(n),ko.applyBindings(e,n),e.afterBind&&e.afterBind(n)})}}}),n("durandal/viewModel",["./system"],function(e){function t(e){return void 0==e&&(e={}),e.closeOnDeactivate||(e.closeOnDeactivate=s.defaults.closeOnDeactivate),e.beforeActivate||(e.beforeActivate=s.defaults.beforeActivate),e.afterDeactivate||(e.afterDeactivate=s.defaults.afterDeactivate),e.interpretResponse||(e.interpretResponse=s.defaults.interpretResponse),e.areSameItem||(e.areSameItem=s.defaults.areSameItem),e}function n(t,n,r,o,a){if(t&&t.deactivate){e.log("Deactivating",t);var i;try{i=t.deactivate(n)}catch(s){return e.log(s),o.resolve(!1),void 0}i&&i.then?i.then(function(){r.afterDeactivate(t,n,a),o.resolve(!0)},function(t){e.log(t),o.resolve(!1)}):(r.afterDeactivate(t,n,a),o.resolve(!0))}else t&&r.afterDeactivate(t,n,a),o.resolve(!0)}function r(t,n,r,o){if(t)if(t.activate){e.log("Activating",t);var a;try{a=t.activate(o)}catch(i){return e.log(i),r(!1),void 0}a&&a.then?a.then(function(){n(t),r(!0)},function(t){e.log(t),r(!1)}):(n(t),r(!0))}else n(t),r(!0);else r(!0)}function o(t,n,r){return e.defer(function(o){if(t&&t.canDeactivate){var a;try{a=t.canDeactivate(n)}catch(i){return e.log(i),o.resolve(!1),void 0}a.then?a.then(function(e){o.resolve(r.interpretResponse(e))},function(t){e.log(t),o.resolve(!1)}):o.resolve(r.interpretResponse(a))}else o.resolve(!0)}).promise()}function a(t,n,r,o){return e.defer(function(a){if(t==n())return a.resolve(!0),void 0;if(t&&t.canActivate){var i;try{i=t.canActivate(o)}catch(s){return e.log(s),a.resolve(!1),void 0}i.then?i.then(function(e){a.resolve(r.interpretResponse(e))},function(t){e.log(t),a.resolve(!1)}):a.resolve(r.interpretResponse(i))}else a.resolve(!0)}).promise()}function i(i,s){var c=ko.observable(null);s=t(s);var l=ko.computed({read:function(){return c()},write:function(e){l.viaSetter=!0,l.activateItem(e)}});return l.settings=s,s.activator=l,l.isActivating=ko.observable(!1),l.canDeactivateItem=function(e,t){return o(e,t,s)},l.deactivateItem=function(t,r){return e.defer(function(e){l.canDeactivateItem(t,r).then(function(o){o?n(t,r,s,e,c):(l.notifySubscribers(),e.resolve(!1))})}).promise()},l.canActivateItem=function(e,t){return a(e,c,s,t)},l.activateItem=function(t,o){var a=l.viaSetter;return l.viaSetter=!1,e.defer(function(i){if(l.isActivating())return i.resolve(!1),void 0;l.isActivating(!0);var u=c();return s.areSameItem(u,t,o)?(l.isActivating(!1),i.resolve(!0),void 0):(l.canDeactivateItem(u,s.closeOnDeactivate).then(function(d){d?l.canActivateItem(t,o).then(function(d){d?e.defer(function(e){n(u,s.closeOnDeactivate,s,e)}).promise().then(function(){t=s.beforeActivate(t,o),r(t,c,function(e){l.isActivating(!1),i.resolve(e)},o)}):(a&&l.notifySubscribers(),l.isActivating(!1),i.resolve(!1))}):(a&&l.notifySubscribers(),l.isActivating(!1),i.resolve(!1))}),void 0)}).promise()},l.canActivate=function(){var e;return i?(e=i,i=!1):e=l(),l.canActivateItem(e)},l.activate=function(){var e;return i?(e=i,i=!1):e=l(),l.activateItem(e)},l.canDeactivate=function(e){return l.canDeactivateItem(l(),e)},l.deactivate=function(e){return l.deactivateItem(l(),e)},l.includeIn=function(e){e.canActivate=function(){return l.canActivate()},e.activate=function(){return l.activate()},e.canDeactivate=function(e){return l.canDeactivate(e)},e.deactivate=function(e){return l.deactivate(e)}},s.includeIn?l.includeIn(s.includeIn):i&&l.activate(),l.forItems=function(t){s.closeOnDeactivate=!1,s.determineNextItemToActivate=function(e,t){var n=t-1;return-1==n&&e.length>1?e[1]:n>-1&&e.length-1>n?e[n]:null},s.beforeActivate=function(e){var n=l();if(e){var r=t.indexOf(e);-1==r?t.push(e):e=t()[r]}else e=s.determineNextItemToActivate(t,n?t.indexOf(n):0);return e},s.afterDeactivate=function(e,n){n&&t.remove(e)};var n=l.canDeactivate;l.canDeactivate=function(r){return r?e.defer(function(e){function n(){for(var t=0;a.length>t;t++)if(!a[t])return e.resolve(!1),void 0;e.resolve(!0)}for(var o=t(),a=[],i=0;o.length>i;i++)l.canDeactivateItem(o[i],r).then(function(e){a.push(e),a.length==o.length&&n()})}).promise():n()};var r=l.deactivate;return l.deactivate=function(n){return n?e.defer(function(e){function r(r){l.deactivateItem(r,n).then(function(){a++,t.remove(r),a==i&&e.resolve()})}for(var o=t(),a=0,i=o.length,s=0;i>s;s++)r(o[s])}).promise():r()},l},l}var s;return s={defaults:{closeOnDeactivate:!0,interpretResponse:function(e){if("string"==typeof e){var t=e.toLowerCase();return"yes"==t||"ok"==t}return e},areSameItem:function(e,t){return e==t},beforeActivate:function(e){return e},afterDeactivate:function(e,t,n){t&&n&&n(null)}},activator:i}}),n("durandal/composition",["./viewLocator","./viewModelBinder","./viewEngine","./system","./viewModel"],function(e,t,n,r,o){function a(e){return e.model&&e.model.activate&&(f.activateDuringComposition&&void 0==e.activate||e.activate)}function i(e,t){a(e)?o.activator().activateItem(e.model).then(function(e){e&&t()}):t()}function s(e){for(var t=[],n={childElements:t,activeView:null},r=ko.virtualElements.firstChild(e);r;)1==r.nodeType&&(t.push(r),r.getAttribute(d)&&(n.activeView=r)),r=ko.virtualElements.nextSibling(r);return n}function c(e,t,n){n.activeView&&n.activeView.removeAttribute(d),t&&(n.model&&n.model.viewAttached&&(n.composingNewView||n.alwaysAttachView)&&n.model.viewAttached(t),t.setAttribute(d,!0)),n.afterCompose&&n.afterCompose(e,t,n)}function l(e,t){if("string"==typeof t.transition){if(t.activeView){if(t.activeView==e)return!1;if(!e)return!0;if(t.skipTransitionOnSameViewId){var n=t.activeView.getAttribute("data-view"),r=e.getAttribute("data-view");return n!=r}}return!0}return!1}var u={},d="data-active-view",f={activateDuringComposition:!1,convertTransitionToModuleId:function(e){return"durandal/transitions/"+e},switchContent:function(e,t,n){if(n.transition=n.transition||this.defaultTransitionName,l(t,n)){var o=this.convertTransitionToModuleId(n.transition);r.acquire(o).then(function(r){n.transition=r,r(e,t,n).then(function(){c(e,t,n)})})}else t!=n.activeView&&(n.cacheViews&&n.activeView&&$(n.activeView).css("display","none"),t?n.cacheViews?n.composingNewView?(n.viewElements.push(t),ko.virtualElements.prepend(e,t)):$(t).css("display",""):(ko.virtualElements.emptyNode(e),ko.virtualElements.prepend(e,t)):n.cacheViews||ko.virtualElements.emptyNode(e)),c(e,t,n)},bindAndShow:function(e,r,o){o.composingNewView=o.cacheViews?-1==ko.utils.arrayIndexOf(o.viewElements,r):!0,i(o,function(){if(o.beforeBind&&o.beforeBind(e,r,o),o.preserveContext&&o.bindingContext)o.composingNewView&&t.bindContext(o.bindingContext,r,o.model);else if(r){var a=o.model||u,i=ko.dataFor(r);if(i!=a){if(!o.composingNewView)return $(r).remove(),n.createView(r.getAttribute("data-view")).then(function(t){f.bindAndShow(e,t,o)}),void 0;t.bind(a,r)}}f.switchContent(e,r,o)})},defaultStrategy:function(t){return e.locateViewForObject(t.model,t.viewElements)},getSettings:function(e){var t=ko.utils.unwrapObservable(e())||{};if("string"==typeof t)return t;var n=r.getModuleId(t);if(n)return{model:t};for(var o in t)t[o]=ko.utils.unwrapObservable(t[o]);return t},executeStrategy:function(e,t){t.strategy(t).then(function(n){f.bindAndShow(e,n,t)})},inject:function(t,n){return n.model?n.view?(e.locateView(n.view,n.area,n.viewElements).then(function(e){f.bindAndShow(t,e,n)}),void 0):((void 0===n.view||n.view)&&(n.strategy||(n.strategy=this.defaultStrategy),"string"==typeof n.strategy?r.acquire(n.strategy).then(function(e){n.strategy=e,f.executeStrategy(t,n)}):this.executeStrategy(t,n)),void 0):(this.bindAndShow(t,null,n),void 0)},compose:function(t,o,a){"string"==typeof o&&(o=n.isViewUrl(o)?{view:o}:{model:o});var i=r.getModuleId(o);i&&(o={model:o});var c=s(t);o.bindingContext=a,o.activeView=c.activeView,o.cacheViews&&!o.viewElements&&(o.viewElements=c.childElements),o.model?"string"==typeof o.model?r.acquire(o.model).then(function(e){o.model="function"==typeof e?new e(t,o):e,f.inject(t,o)}):f.inject(t,o):o.view?(o.area=o.area||"partial",o.preserveContext=!0,e.locateView(o.view,o.area,o.viewElements).then(function(e){f.bindAndShow(t,e,o)})):this.bindAndShow(t,null,o)}};return ko.bindingHandlers.compose={update:function(e,t,n,r,o){var a=f.getSettings(t);f.compose(e,a,o)}},ko.virtualElements.allowedBindings.compose=!0,f}),n("durandal/widget",["./system","./composition"],function(e,t){var n="data-part",r="["+n+"]",o={},a={},i=["model","view","kind"],s={getParts:function(t){var o={};e.isArray(t)||(t=[t]);for(var a=0;t.length>a;a++){var i=t[a];if(i.getAttribute){var s=i.getAttribute(n);s&&(o[s]=i);for(var c=$(r,i),l=0;c.length>l;l++){var u=c.get(l);o[u.getAttribute(n)]=u}}}return o},getSettings:function(e){var t=ko.utils.unwrapObservable(e())||{};if("string"==typeof t)return t;for(var n in t)t[n]=-1!=ko.utils.arrayIndexOf(i,n)?ko.utils.unwrapObservable(t[n]):t[n];return t},registerKind:function(e){ko.bindingHandlers[e]={init:function(){return{controlsDescendantBindings:!0}},update:function(t,n,r,o,a){var i=s.getSettings(n);i.kind=e,s.create(t,i,a)}},ko.virtualElements.allowedBindings[e]=!0},mapKind:function(e,t,n){t&&(a[e]=t),n&&(o[e]=n)},convertKindToModuleId:function(e){return o[e]||"durandal/widgets/"+e+"/controller"},convertKindToViewId:function(e){return a[e]||"durandal/widgets/"+e+"/view"},beforeBind:function(e,t){var n=s.getParts(e),r=s.getParts(t);for(var o in n)$(r[o]).replaceWith(n[o])},createCompositionSettings:function(e){return e.model||(e.model=this.convertKindToModuleId(e.kind)),e.view||(e.view=this.convertKindToViewId(e.kind)),e.preserveContext=!0,e.beforeBind=this.beforeBind,e},create:function(e,n,r){"string"==typeof n&&(n={kind:n});var o=s.createCompositionSettings(n);t.compose(e,o,r)}};return ko.bindingHandlers.widget={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,r,o){var a=s.getSettings(t);s.create(e,a,o)}},ko.virtualElements.allowedBindings.widget=!0,s}),n("durandal/modalDialog",["./composition","./system","./viewModel"],function(e,t,n){function r(e){return t.defer(function(n){"string"==typeof e?t.acquire(e).then(function(e){"function"==typeof e?n.resolve(new e):n.resolve(e)}):n.resolve(e)}).promise()}var o={},a=0,i={currentZIndex:1050,getNextZIndex:function(){return++this.currentZIndex},isModalOpen:function(){return a>0},getContext:function(e){return o[e||"default"]},addContext:function(e,t){t.name=e,o[e]=t;var n="show"+e.substr(0,1).toUpperCase()+e.substr(1);this[n]=function(t,n){return this.show(t,n,e)}},createCompositionSettings:function(e,t){var n={model:e,activate:!1};return t.afterCompose&&(n.afterCompose=t.afterCompose),n},show:function(i,s,c){var l=this,u=o[c||"default"];return t.defer(function(t){r(i).then(function(r){var o=n.activator();o.activateItem(r,s).then(function(n){if(n){var i=r.modal={owner:r,context:u,activator:o,close:function(){var e=arguments;o.deactivateItem(r,!0).then(function(n){n&&(a--,u.removeHost(i),delete r.modal,t.resolve.apply(t,e))})}};i.settings=l.createCompositionSettings(r,u),u.addHost(i),a++,e.compose(i.host,i.settings)}else t.resolve(!1)})})}).promise()}};return i.addContext("default",{blockoutOpacity:.2,removeDelay:200,addHost:function(e){var t=$("body"),n=$('<div class="modalBlockout"></div>').css({"z-index":i.getNextZIndex(),opacity:this.blockoutOpacity}).appendTo(t),r=$('<div class="modalHost"></div>').css({"z-index":i.getNextZIndex()}).appendTo(t);if(e.host=r.get(0),e.blockout=n.get(0),!i.isModalOpen()){e.oldBodyMarginRight=$("body").css("margin-right");var o=$("html"),a=t.outerWidth(!0),s=o.scrollTop();$("html").css("overflow-y","hidden");var c=$("body").outerWidth(!0);t.css("margin-right",c-a+parseInt(e.oldBodyMarginRight)+"px"),o.scrollTop(s),$("#simplemodal-overlay").css("width",c+"px")}},removeHost:function(e){if($(e.host).css("opacity",0),$(e.blockout).css("opacity",0),setTimeout(function(){$(e.host).remove(),$(e.blockout).remove()},this.removeDelay),!i.isModalOpen()){var t=$("html"),n=t.scrollTop();t.css("overflow-y","").scrollTop(n),$("body").css("margin-right",e.oldBodyMarginRight)}},afterCompose:function(e,t,n){var r=$(t),o=r.width(),a=r.height();r.css({"margin-top":""+-a/2+"px","margin-left":""+-o/2+"px"}),$(n.model.modal.host).css("opacity",1),$(t).hasClass("autoclose")&&$(n.model.modal.blockout).click(function(){n.model.modal.close()}),$(".autofocus",t).each(function(){$(this).focus()})}}),i}),n("durandal/events",["./system"],function(e){var t=/\s+/,n=function(){},r=function(e,t){this.owner=e,this.events=t};return r.prototype.then=function(e,t){return this.callback=e||this.callback,this.context=t||this.context,this.callback?(this.owner.on(this.events,this.callback,this.context),this):this},r.prototype.on=r.prototype.then,r.prototype.off=function(){return this.owner.off(this.events,this.callback,this.context),this},n.prototype.on=function(e,n,o){var a,i,s;if(n){for(a=this.callbacks||(this.callbacks={}),e=e.split(t);i=e.shift();)s=a[i]||(a[i]=[]),s.push(n,o);return this}return new r(this,e)},n.prototype.off=function(n,r,o){var a,i,s,c;if(!(i=this.callbacks))return this;if(!(n||r||o))return delete this.callbacks,this;for(n=n?n.split(t):e.keys(i);a=n.shift();)if((s=i[a])&&(r||o))for(c=s.length-2;c>=0;c-=2)r&&s[c]!==r||o&&s[c+1]!==o||s.splice(c,2);else delete i[a];return this},n.prototype.trigger=function(e){var n,r,o,a,i,s,c,l;if(!(r=this.callbacks))return this;for(l=[],e=e.split(t),a=1,i=arguments.length;i>a;a++)l[a-1]=arguments[a];for(;n=e.shift();){if((c=r.all)&&(c=c.slice()),(o=r[n])&&(o=o.slice()),o)for(a=0,i=o.length;i>a;a+=2)o[a].apply(o[a+1]||this,l);if(c)for(s=[n].concat(l),a=0,i=c.length;i>a;a+=2)c[a].apply(c[a+1]||this,s)}return this},n.prototype.proxy=function(e){var t=this;return function(n){t.trigger(e,n)}},n.includeIn=function(e){e.on=n.prototype.on,e.off=n.prototype.off,e.trigger=n.prototype.trigger,e.proxy=n.prototype.proxy},n}),n("durandal/app",["./system","./viewEngine","./composition","./widget","./modalDialog","./events"],function(e,t,n,r,o,a){var i={title:"Application",showModal:function(e,t,n){return o.show(e,t,n)},showMessage:function(e,t,n){return o.show("./messageBox",{message:e,title:t||this.title,options:n})},start:function(){var t=this;return t.title&&(document.title=t.title),e.defer(function(t){$(function(){e.log("Starting Application"),t.resolve(),e.log("Started Application")})}).promise()},setRoot:function(e,r,o){var a,i={activate:!0,transition:r};a=o&&"string"!=typeof o?o:document.getElementById(o||"applicationHost"),"string"==typeof e?t.isViewUrl(e)?i.view=e:i.model=e:i.model=e,n.compose(a,i)},adaptToDevice:function(){document.ontouchmove=function(e){e.preventDefault()}}};return a.includeIn(i),i}),n("durandal/plugins/router",["../system","../viewModel","../app"],function(e,t,n){function r(t){A(!1),e.log("Redirecting"),g.navigateTo(t)}function o(){M=!0,e.log("Cancelling Navigation"),b&&h.setLocation(b),M=!1,A(!1);var t=h.last_location[1].split("#/")[1];b||!t?B():t!=y?window.location.replace("#/"+y):B()}function a(e,t,n){D(e),g.onNavigationComplete(e,t,n),w=n,b=h.last_location[1].replace("/",""),B()}function i(t,n,r){e.log("Activating Route",t,r,n),C.activateItem(r,n).then(function(e){e?a(t,n,r):o()})}function s(){return M||h.last_location[1].replace("/","")==b}function c(e,t,n){var a=g.guardRoute(e,t,n);a?a.then?a.then(function(a){a?"string"==typeof a?r(a):i(e,t,n):o()}):"string"==typeof a?r(a):i(e,t,n):o()}function l(){if(!A()){var t=R.shift();R=[],t&&(A(!0),e.acquire(t.routeInfo.moduleId).then(function(e){t.params.routeInfo=t.routeInfo,t.params.router=g;var n=g.getActivatableInstance(t.routeInfo,t.params,e);g.guardRoute?c(t.routeInfo,t.params,n):i(t.routeInfo,t.params,n)}))}}function u(e,t){R.unshift({routeInfo:e,params:t}),l()}function d(e,t){var n=x[e];if(!s()){if(!n){if(!g.autoConvertRouteToModuleId)return g.handleInvalidRoute(e,t),void 0;var r=g.convertRouteToName(e);n={moduleId:g.autoConvertRouteToModuleId(e,t),name:r,caption:r}}u(n,t)}}function f(){d(y,this.params||{})}function v(){d(""+this.app.last_route.path,this.params||{})}function m(){var e,t=this.params||{};if(g.autoConvertRouteToModuleId){var n=this.path.split("#/");if(2==n.length){var r=n[1].split("/");return e=r[0],t.splat=r.splice(1),d(e,t),void 0}}g.handleInvalidRoute(this.app.last_location[1],t)}function p(e){return g.prepareRouteInfo(e),x[""+e.url]=e,I.push(e),e.visible&&(e.isActive=ko.computed(function(){return S()&&C()&&C().__moduleId__==e.moduleId}),T.push(e)),e}var h,g,b,w,y,k,x={},I=ko.observableArray([]),T=ko.observableArray([]),S=ko.observable(!1),A=ko.observable(!1),M=!1,C=t.activator(),D=ko.observable(),R=[],B=function(){B=e.noop,S(!0),g.dfd.resolve(),delete g.dfd};return C.settings.areSameItem=function(){return!1},g={ready:S,allRoutes:I,visibleRoutes:T,isNavigating:A,activeItem:C,activeRoute:D,afterCompose:function(){setTimeout(function(){A(!1),l(),g.onRouteComposed&&g.onRouteComposed(g.activeRoute())},10)},getActivatableInstance:function(e,t,n){return"function"==typeof n?new n:n},useConvention:function(e){e=null==e?"viewmodels":e,e&&(e+="/"),g.convertRouteToModuleId=function(t){return e+g.stripParameter(t)}},stripParameter:function(e){var t=e.indexOf(":"),n=t>0?t-1:e.length;return e.substring(0,n)},handleInvalidRoute:function(t,n){e.log("No Route Found",t,n)},onNavigationComplete:function(e){document.title=n.title?e.caption+" | "+n.title:e.caption},navigateBack:function(){window.history.back()},navigateTo:function(e,t){switch(t=t||"trigger",t.toLowerCase()){case"skip":k=e,h.setLocation(e);break;case"replace":window.location.replace(e);break;default:h.lookupRoute("get",e)&&0!==e.indexOf("http")?h.setLocation(e):window.location.href=e}},navigateToRoute:function(e,t){var n=e;for(var r in x)if(g.stripParameter(x[r].url)==e){n=x[r].hash;break}var o=n.indexOf(":");if(o>0){var a=n.substring(o-1,n.length),i=a.split("/:");n=g.stripParameter(n);for(var s=0;i.length>s;s++)i[s]&&(n+="/"+t[i[s]])}h.setLocation(n)},replaceLocation:function(e){this.navigateTo(e,"replace")},convertRouteToName:function(e){var t=g.stripParameter(e);return t.substring(0,1).toUpperCase()+t.substring(1)},convertRouteToModuleId:function(e){return g.stripParameter(e)},prepareRouteInfo:function(e){e.url instanceof RegExp||(e.name=e.name||g.convertRouteToName(e.url),e.moduleId=e.moduleId||g.convertRouteToModuleId(e.url),e.hash=e.hash||"#/"+e.url),e.caption=e.caption||e.name,e.settings=e.settings||{}},mapAuto:function(e){e=e||"viewmodels",e+="/",g.autoConvertRouteToModuleId=function(t){return e+g.stripParameter(t)}},mapNav:function(e,t,n){return"string"==typeof e?this.mapRoute(e,t,n,!0):(e.visible=!0,p(e))},mapRoute:function(e,t,n,r){return"string"==typeof e?p({url:e,moduleId:t,name:n,visible:r}):p(e)},map:function(t){if(!e.isArray(t))return p(t);for(var n=[],r=0;t.length>r;r++)n.push(p(t[r]));return n},deactivate:function(){g.allRoutes.removeAll(),g.visibleRoutes.removeAll(),h&&h.destroy()},activate:function(t){return e.defer(function(n){var r;g.dfd=n,y=t,h=Sammy(function(e){for(var t=I(),n=0;t.length>n;n++){var o=t[n];e.get(o.url,v),r=this.routes.get[n],x[""+r.path]=o}e.get("#/",f),e.get(/\#\/(.*)/,m)}),h._checkFormSubmission=function(){return!1},h.before(null,function(t){return k?t.path==="/"+k?(k=null,!1):(e.error(Error("Expected to skip url '"+k+"', but found url '"+t.path+"'")),void 0):!0}),h.log=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("Sammy"),e.log.apply(e,t)},h.run("#/")}).promise()}}}),n("services/logger",["durandal/system"],function(e){function t(e,t,n,o){r(e,t,n,o,"info")}function n(e,t,n,o){r(e,t,n,o,"error")}function r(t,n,r,o,a){r=r?"["+r+"] ":"",n?e.log(r,t,n):e.log(r,t),o&&("error"===a?toastr.error(t):toastr.info(t))}var o={log:t,logError:n};return o}),t.config({paths:{text:"durandal/amd/text"}}),n("main",["durandal/app","durandal/viewLocator","durandal/system","durandal/plugins/router","services/logger"],function(e,t,n,r,o){n.debug(!0),e.start().then(function(){toastr.options.positionClass="toast-bottom-right",toastr.options.backgroundpositionClass="toast-bottom-right",r.handleInvalidRoute=function(e){o.logError("No Route Found",e,"main",!0)},r.useConvention(),t.useConvention(),e.adaptToDevice(),e.setRoot("viewmodels/shell","entrance")})}),n("durandal/http",[],function(){return{defaultJSONPCallbackParam:"callback",get:function(e,t){return $.ajax(e,{data:t})},jsonp:function(e,t,n){return-1==e.indexOf("=?")&&(n=n||this.defaultJSONPCallbackParam,e+=-1==e.indexOf("?")?"?":"&",e+=n+"=?"),$.ajax({url:e,dataType:"jsonp",data:t})},post:function(e,t){return $.ajax({url:e,data:ko.toJSON(t),type:"POST",contentType:"application/json",dataType:"json"})}}}),n("text",["module"],function(e){var n,r,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,i=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,s="undefined"!=typeof location&&location.href,c=s&&location.protocol&&location.protocol.replace(/\:/,""),l=s&&location.hostname,u=s&&(location.port||void 0),d=[],f=e.config&&e.config()||{};return n={version:"2.0.3",strip:function(e){if(e){e=e.replace(a,"");var t=e.match(i);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t=!1,n=e.indexOf("."),r=e.substring(0,n),o=e.substring(n+1,e.length);return n=o.indexOf("!"),-1!==n&&(t=o.substring(n+1,o.length),t="strip"===t,o=o.substring(0,n)),{moduleName:r,ext:o,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,r,o){var a,i,s,c=n.xdRegExp.exec(e);return c?(a=c[2],i=c[3],i=i.split(":"),s=i[1],i=i[0],!(a&&a!==t||i&&i.toLowerCase()!==r.toLowerCase()||(s||i)&&s!==o)):!0},finishLoad:function(e,t,r,o){r=t?n.strip(r):r,f.isBuild&&(d[e]=r),o(r)},load:function(e,t,r,o){if(o.isBuild&&!o.inlineText)return r(),void 0;f.isBuild=o.isBuild;var a=n.parseName(e),i=a.moduleName+"."+a.ext,d=t.toUrl(i),v=f.useXhr||n.useXhr;!s||v(d,c,l,u)?n.get(d,function(t){n.finishLoad(e,a.strip,t,r)},function(e){r.error&&r.error(e)}):t([i],function(e){n.finishLoad(a.moduleName+"."+a.ext,a.strip,e,r)})},write:function(e,t,r){if(d.hasOwnProperty(t)){var o=n.jsEscape(d[t]);r.asModule(e+"!"+t,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,t,r,o,a){var i=n.parseName(t),s=i.moduleName+"."+i.ext,c=r.toUrl(i.moduleName+"."+i.ext)+".js";n.load(s,r,function(){var t=function(e){return o(c,e)};t.asModule=function(e,t){return o.asModule(e,c,t)},n.write(e,s,t,a)},a)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(r=t.nodeRequire("fs"),n.get=function(e,t){var n=r.readFileSync(e,"utf8");0===n.indexOf("﻿")&&(n=n.substring(1)),t(n)}):"xhr"===f.env||!f.env&&n.createXhr()?n.get=function(e,t,r){var o=n.createXhr();o.open("GET",e,!0),f.onXhr&&f.onXhr(o,e),o.onreadystatechange=function(){var n,a;
4===o.readyState&&(n=o.status,n>399&&600>n?(a=Error(e+" HTTP status: "+n),a.xhr=o,r(a)):t(o.responseText))},o.send(null)}:("rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java)&&(n.get=function(e,t){var n,r,o="utf-8",a=new java.io.File(e),i=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(a),o)),c="";try{for(n=new java.lang.StringBuffer,r=s.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),n.append(r);null!==(r=s.readLine());)n.append(i),n.append(r);c=""+n+""}finally{s.close()}t(c)}),n}),n("text!durandal/messageBox.html",[],function(){return'<div class="messageBox">\r\n    <div class="modal-header">\r\n        <h3 data-bind="html: title"></h3>\r\n    </div>\r\n    <div class="modal-body">\r\n        <p class="message" data-bind="html: message"></p>\r\n    </div>\r\n    <div class="modal-footer" data-bind="foreach: options">\r\n        <button class="btn" data-bind="click: function () { $parent.selectOption($data); }, html: $data, css: { \'btn-primary\': $index() == 0, autofocus: $index() == 0 }"></button>\r\n    </div>\r\n</div>'}),n("durandal/messageBox",[],function(){var e=function(t,n,r){this.message=t,this.title=n||e.defaultTitle,this.options=r||e.defaultOptions};return e.prototype.selectOption=function(e){this.modal.close(e)},e.prototype.activate=function(t){t&&(this.message=t.message,this.title=t.title||e.defaultTitle,this.options=t.options||e.defaultOptions)},e.defaultTitle="Application",e.defaultOptions=["Ok"],e}),n("durandal/transitions/entrance",["../system"],function(e){var t=100,n=function(n,r,o){return e.defer(function(e){function a(){e.resolve()}function i(){o.keepScrollPosition||$(document).scrollTop(0)}function s(){i(),o.cacheViews?o.composingNewView&&ko.virtualElements.prepend(n,r):(ko.virtualElements.emptyNode(n),ko.virtualElements.prepend(n,r));var e={marginLeft:"20px",marginRight:"-20px",opacity:0,display:"block"},t={marginRight:0,marginLeft:0,opacity:1};$(r).css(e),$(r).animate(t,l,"swing",a)}if(r){var c=$(o.activeView),l=o.duration||500;c.length?c.fadeOut(t,s):s()}else i(),o.activeView?$(o.activeView).fadeOut(t,function(){o.cacheViews||ko.virtualElements.emptyNode(n),a()}):(o.cacheViews||ko.virtualElements.emptyNode(n),a())}).promise()};return n}),n("services/model",["config"],function(e){function t(e){e.registerEntityTypeCtor("Manufacturer",null,r),e.registerEntityTypeCtor("BikeModel",null,o),e.registerEntityTypeCtor("BikeSize",null,a)}function n(e){function t(t,r){var o=t;"Manufacturer"==t&&(o="Mfg.");var a=r||{name:" Select a "+o};return e.createEntity(t,a,n)}var n=breeze.EntityState.Unchanged;t(i.manufacturer)}function r(){}function o(e){e.sizes=ko.observableArray(),e.manufacturedStartDateFormatted=ko.computed({read:function(){var t=e.manufacturedStartDate(),n=moment(t).calendar();return n},write:function(t){var n=moment(t,"MM-DD-YYYY").toJSON();e.manufacturedStartDate(n)},owner:e}),e.manufacturedEndDateFormatted=ko.computed({read:function(){return moment(e.manufacturedEndDate()).calendar()},write:function(t){var n=moment(t,"MM-DD-YYYY").toJSON();e.manufacturedEndDate(n)},owner:e})}function a(t){t.wheelRadius=ko.computed(function(){var n;return n="SevenHundred"==t.wheelSize()?334:308.5,n*e.scalingFactor}),t.bbXloc=ko.computed(function(){return e.xOffset(0)}),t.bbYloc=ko.computed(function(){return e.yOffset(t.wheelRadius()-t.bottomBracketDrop()*e.scalingFactor)}),t.headTubeTopXloc=ko.computed(function(){return t.bbXloc()+t.reach()*e.scalingFactor}),t.headTubeTopYloc=ko.computed(function(){return t.bbYloc()-t.stack()*e.scalingFactor}),t.headTubeBottomXloc=ko.computed(function(){var n=Math.sin((90-t.headTubeAngle())*(Math.PI/180))*t.headTubeLength()*e.scalingFactor;return t.headTubeTopXloc()+n}),t.headTubeBottomYloc=ko.computed(function(){var n=Math.cos((90-t.headTubeAngle())*(Math.PI/180))*t.headTubeLength()*e.scalingFactor;return t.headTubeTopYloc()+n}),t.rearWheelXloc=ko.computed(function(){return e.xOffset(-Math.sqrt(Math.pow(t.rearCenter(),2)-Math.pow(t.bottomBracketDrop(),2))*e.scalingFactor)}),t.rearWheelYloc=ko.computed(function(){return e.yOffset(t.wheelRadius())}),t.frontWheelXloc=ko.computed(function(){return e.xOffset(Math.sqrt(Math.pow(t.frontCenter(),2)-Math.pow(t.bottomBracketDrop(),2))*e.scalingFactor)}),t.frontWheelYloc=ko.computed(function(){return e.yOffset(t.wheelRadius())}),t.avgSeatTubeAngle=ko.computed(function(){return(t.maxSeatAngle()+t.minSeatAngle())/2}),t.seatTubeXloc=ko.computed(function(){var n=Math.tan((90-t.avgSeatTubeAngle())*(Math.PI/180))*t.stack();return t.bbXloc()-n*e.scalingFactor}),t.seatTubeYloc=ko.computed(function(){return t.headTubeTopYloc()}),t.wheelSizeFormatted=ko.computed(function(){return"SevenHundred"==t.wheelSize()?"700c":"650c"}),t.stackFormatted=ko.computed(function(){return t.stack()+"mm"}),t.reachFormatted=ko.computed(function(){return t.reach()+"mm"}),t.frontCenterFormatted=ko.computed(function(){return t.frontCenter()+"mm"}),t.rearCenterFormatted=ko.computed(function(){return t.rearCenter()+"mm"}),t.headTubeLengthFormatted=ko.computed(function(){return t.headTubeLength()+"mm"}),t.minSeatAngleFormatted=ko.computed(function(){return t.minSeatAngle()+"°"}),t.maxSeatAngleFormatted=ko.computed(function(){return t.maxSeatAngle()+"°"})}var i={bikeModel:"BikeModel",bikeSize:"BikeSize",manufacturer:"Manufacturer"},s={configureMetadataStore:t,createNullos:n,entityNames:i};return s}),n("services/datacontext",["durandal/system","services/model","config","services/logger"],function(e,t,n,r){function o(e,t,n){var r=u.from(e).orderBy(t);return n||(r=r.where("id","!=",0)),d.executeQueryLocally(r)}function a(t){var n="Error retreiving data. "+t.message;r.logError(n,t,e.getModuleId(I),!0)}function i(){breeze.NamingConvention.camelCase.setAsDefault();var e=new breeze.EntityManager(n.remoteServiceName);return t.configureMetadataStore(e.metadataStore),e}function s(t,n,o){r.log(t,n,e.getModuleId(I),o)}function c(){t.createNullos(d)}function l(e,t,n){var r=breeze.EntityState.Unchanged,o=n||{name:" Select a "+t};return d.createEntity(e,o,r)}var u=breeze.EntityQuery,d=i(),f=t.entityNames,v=function(e){return d.createEntity(f.bikeSize,{sizeID:breeze.core.getUuid(),bikeModelID:e})},m=function(e){var t=d.createEntity(f.bikeModel,{bikeModelID:breeze.core.getUuid(),manufactuerID:e,manufacturedStartDate:new Date(2e3,1,1),manufacturedEndDate:new Date});return t.addNewSize=function(){var e=v(this.bikeModelID());return this.sizes.valueHasMutated(),e},t},p=function(e){function t(t){e&&e(t.results),s("Retrieved [Manufacturer] from remote data source",t,!1)}var n=u.from("Manufacturers").orderBy("name");return d.executeQuery(n).then(t).fail(a)},h=function(e,t){function n(n){if(e){var r={bikeModelID:breeze.core.getUuid(),manufactuerID:t,manufacturedStartDate:new Date(2e3,1,1),manufacturedEndDate:new Date,name:" Select a Model"};l(f.bikeModel,"Model",r),e(n.results)}s("Retrieved [Bike Models] from remote data source",n,!1)}if("00000000-0000-0000-0000-000000000000"==t)return e(""),!0;var r=u.from("BikeModels").where("manufactuerID","==",t).orderBy("name");return d.executeQuery(r).then(n).fail(a)},g=function(e,t){function n(t){if(e){for(var n=0;t.results.length>n;n++)I.getBikeSizes(t.results[n].sizes,t.results[n].bikeModelID()),t.results[n].addNewSize=function(){var e=v(this.bikeModelID());return this.sizes.valueHasMutated(),e};e(t.results)}s("Retrieved [Bike Models With Sizes] from remote data source",t,!1)}var r=u.from("BikeModels").where("manufactuerID","==",t).orderBy("name");return d.executeQuery(r).then(n).fail(a)},b=function(e,t){function n(n){if(e){var r={size:" Select a Size",sizeID:breeze.core.getUuid(),bikeModelID:t};l(f.bikeSize,"Size",r),e(n.results)}s("Retrieved [Bike Sizes] from remote data source",n,!1)}var r=u.from("BikeSizes").where("bikeModelID","==",t).orderBy("size");return d.executeQuery(r).then(n).fail(a)},w=function(){var e=d.rejectChanges();return s("Canceled changes",null,!0),e},y=function(){function e(e){s("Saved data successfully",e,!0)}function t(e){var t="Save failed: "+e.message;throw logError(t,e),e.message=t,e}return d.saveChanges().then(e).fail(t)},k=ko.observable(!1);d.hasChangesChanged.subscribe(function(e){k(e.hasChanges)});var x=function(){function e(){I.lookups={manufacturers:function(){return o("Manufacturers","name",!0)}}}var t=Q.all([p()]).then(c);return t.then(e)},I={createNewModel:m,getManufacturers:p,getBikeModels:h,getBikeModelsWithSizes:g,getBikeSizes:b,hasChanges:k,primeData:x,cancelChanges:w,saveChanges:y};return I}),n("viewmodels/faq",["services/logger"],function(e){function t(){return e.log("FAQ Activated",null,"home",!1),!0}var n={activate:t,title:"Frequently Asked Questions"};return n}),n("viewmodels/frameAdmin",["services/datacontext","services/logger","durandal/app"],function(e,t,n){function r(){var n=e.lookups.manufacturers();return t.log("Frames Admin View Activated",null,"frames",!1),$.when(n).then(function(e){o(e)})}var o=ko.observableArray(),a=ko.observable(),i=ko.observable(!1),s=ko.observableArray();a.subscribe(function(t){e.getBikeModelsWithSizes(s,t.manufacturerID())});var c=function(){var t=this.manu().manufacturerID(),n=e.createNewModel(t);return s.push(n)},l=ko.computed(function(){return e.hasChanges()}),u=function(){for(var t=e.cancelChanges(),n=0;s().length>n;n++)s()[n].sizes.valueHasMutated();for(var n=0;t.length>n;n++)s.remove(t[n])},d=ko.computed(function(){return l()&&!i()}),f=function(){function t(){i(!1)}return i(!0),e.saveChanges().fin(t)},v=ko.computed(function(){if(null==a())return!1;var e=a().manufacturerID();return"00000000-0000-0000-0000-000000000000"==e?!1:!0}),m=function(){if(l()){var e="Do you want to leave ?",t="Navigate away and cancel your changes?",r=function(e){return"Yes"===e&&u(),e};return n.showMessage(e,t,["Yes","No"]).then(r)}return!0},p=ko.observableArray([{name:"700c",value:"SevenHundred"},{name:"650c",value:"SixFifty"}]),h={activate:r,cancel:u,canCreateNewModel:v,canDeactivate:m,canSave:d,createNewModel:c,hasChanges:l,manu:a,manufacturers:o,modelsWithSizes:s,save:f,wheelSizes:p};return h}),n("viewmodels/frames",["services/logger","services/datacontext"],function(e,t){function n(){var n=t.lookups.manufacturers();return e.log("Frames View Activated",null,"frames",!1),$.when(n).then(function(e){o(e)})}function r(e,n,r){function o(e){var t=document.getElementById(n);if(t.getContext){var o=t.getContext("2d");o.clearRect(0,0,t.width,t.height),o.beginPath(),o.arc(e.rearWheelXloc(),e.rearWheelYloc(),e.wheelRadius(),0,2*Math.PI,!0),o.closePath(),o.strokeStyle=r,o.stroke(),o.beginPath(),o.arc(e.frontWheelXloc(),e.frontWheelYloc(),e.wheelRadius(),0,2*Math.PI,!0),o.closePath(),o.strokeStyle=r,o.stroke(),o.beginPath(),o.moveTo(e.rearWheelXloc(),e.rearWheelYloc()),o.lineTo(e.bbXloc(),e.bbYloc()),o.strokeStyle=r,o.stroke(),o.beginPath(),o.moveTo(e.seatTubeXloc(),e.seatTubeYloc()),o.lineTo(e.bbXloc(),e.bbYloc()),o.strokeStyle=r,o.stroke(),o.beginPath(),o.moveTo(e.seatTubeXloc(),e.seatTubeYloc()),o.lineTo(e.rearWheelXloc(),e.rearWheelYloc()),o.strokeStyle=r,o.stroke(),o.beginPath(),o.moveTo(e.bbXloc(),e.bbYloc()),o.lineTo(e.headTubeBottomXloc(),e.headTubeBottomYloc()),o.strokeStyle=r,o.stroke(),o.beginPath(),o.moveTo(e.seatTubeXloc(),e.seatTubeYloc()),o.lineTo(e.headTubeTopXloc(),e.headTubeTopYloc()),o.strokeStyle=r,o.stroke(),o.beginPath(),o.moveTo(e.headTubeTopXloc(),e.headTubeTopYloc()),o.lineTo(e.headTubeBottomXloc(),e.headTubeBottomYloc()),o.strokeStyle=r,o.stroke(),o.beginPath(),o.moveTo(e.frontWheelXloc(),e.frontWheelYloc()),o.lineTo(e.headTubeBottomXloc(),e.headTubeBottomYloc()),o.strokeStyle=r,o.stroke()}}var a=ko.observable();a.subscribe(function(e){t.getBikeModels(i,e.manufacturerID())});var i=ko.observableArray(),s=ko.observable();s.subscribe(function(e){t.getBikeSizes(c,e.bikeModelID()),l(c()[0])});var c=ko.observableArray(),l=ko.observable();l.subscribe(function(e){o(e)});var u={color:r,manufacturer:a,models:i,model:s,name:e,sizes:c,size:l};return u}var o=ko.observableArray(),a=r("Frame 1","bike1","blue"),i=r("Frame 2","bike2","green"),s=r("Frame 3","bike3","gray"),c={activate:n,frame1:a,frame2:i,frame3:s,manufacturers:o,title:"Frames"};return c}),n("viewmodels/shell",["durandal/system","durandal/plugins/router","services/logger","config","services/datacontext"],function(e,t,n,r,o){function a(){return o.primeData().then(i).fail(c)}function i(){return t.map(r.routes),l("My Tri Bike Fit Loaded!",null,!1),t.activate("frames")}function s(e){t.navigateTo(e.hash)}function c(t){var r="App initialization failed: "+t.message;n.logError(r,t,e.getModuleId(f),!0)}function l(t,r,o){n.log(t,r,e.getModuleId(f),o)}var u=ko.computed(function(){return t.allRoutes().filter(function(e){return e.settings.admin})}),d=ko.observable(!1),f={activate:a,adminRoutes:u,isAdmin:d,goToAdmin:s,router:t};return f}),n("viewmodels/login",["services/logger","durandal/plugins/router","viewmodels/shell","config"],function(e,t,n,r){var o=this;o.remember=ko.observable("true"),o.pass=ko.observable(),o.user=ko.observable(),o.send=function(){var e={userName:o.user(),password:o.pass(),rememberMe:o.remember()};return $.post("/Account/LogIn",e).done(function(e){return 1==e?(t.deactivate(),t.map(r.routesLoggedIn)):(t.deactivate(),t.map(r.routes))}).done(function(){return t.activate("frames"),t.navigateTo("#/frames")})},o.register=function(){var e="#/register";t.navigateTo(e)};var a={logIn:o.send,password:o.pass,rememberMe:o.remember,userName:o.user};return a}),n("viewmodels/logout",["services/logger","durandal/plugins/router","viewmodels/shell","config"],function(e,t,n,r){function o(){return $.post("/Account/LogOff").done(function(n){return 1==n?(t.deactivate(),e.log("You were logged out.",null,"Log Out",!0),t.map(r.routes)):(e.error("You were not logged out.",null,"Log Out",!0),!0)}).done(function(){return t.activate("frames"),t.navigateTo("#/frames")})}var a={activate:o};return a}),n("viewmodels/register",["services/logger"],function(e){var t=this;t.pass=ko.observable(),t.passwordConfirm=ko.observable(),t.user=ko.observable(),t.send=function(){var n={userName:t.user(),password:t.pass(),confirmPassword:t.passwordConfirm()};return $.post("/Account/Register",n).done(function(){e.log("Registered",null,"registered",!1)})};var n={signUp:t.send,password:t.pass,passwordConfirm:t.passwordConfirm,userName:t.user};return n}),n("text!views/faq.html",[],function(){return'<section>\r\n    <h2 class="page-title" data-bind="text: title"></h2>\r\n    <div class="accordion" id="accordion2">\r\n        <div class="accordion-group">\r\n            <div class="accordion-heading">\r\n                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseWhat">What is this?\r\n                </a>\r\n            </div>\r\n            <div id="collapseWhat" class="accordion-body collapse in">\r\n                <div class="accordion-inner">\r\n                    This is a simple web site that is meant to compare different bikes in a simple and visual way.\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="accordion-group">\r\n            <div class="accordion-heading">\r\n                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseWhere">Where did the data come from?\r\n                </a>\r\n            </div>\r\n            <div id="collapseWhere" class="accordion-body collapse">\r\n                <div class="accordion-inner">\r\n                    Up to now the data has come primarily from the manufacturers web sites.  If there are inconsistencies in the data it is because I had to calculate the data from other measurements provided by the manufacturers.\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="accordion-group">\r\n            <div class="accordion-heading">\r\n                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseWhy">Why is my favorite bike company or model not included?\r\n                </a>\r\n            </div>\r\n            <div id="collapseWhy" class="accordion-body collapse">\r\n                <div class="accordion-inner">\r\n                    Up to now I have been the only one putting in data to fill this out.  If you would like a specific manufacturer or model added please <a href="mailto:tribikefit@gmail.com">Email Me</a> with the details for all the available sizes and I will try to add it as quickly as possible.\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="accordion-group">\r\n            <div class="accordion-heading">\r\n                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseCoord">What is the coordinate system?\r\n                </a>\r\n            </div>\r\n            <div id="collapseCoord" class="accordion-body collapse">\r\n                <div class="accordion-inner">\r\n                    The ground plane is the zero in Y direction and the center of the bottom bracket is the zero in the X direction.  All the bikes should have their bottom brackets lined up left to right.\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="accordion-group">\r\n            <div class="accordion-heading">\r\n                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTerms">What are the definitions of the various terms?\r\n                </a>\r\n            </div>\r\n            <div id="collapseTerms" class="accordion-body collapse">\r\n                <div class="accordion-inner">\r\n                    <dl class="dl-horizontal">\r\n                        <dt>Stack:</dt>\r\n                        <dd>The vertical distance measured from the center of the bottom bracket to the top of the headtube.</dd>\r\n                        <dt>Reach:</dt>\r\n                        <dd>The horizontal distance measured from the center of the bottom bracket to the top of the headtube.</dd>\r\n                        <dt>Front Center:</dt>\r\n                        <dd>The distance measured from the center of the bottom bracket to the center of the front wheel.</dd>\r\n                        <dt>Rear Center:</dt>\r\n                        <dd>The distance measured from the center of the bottom bracket to the center of the rear wheel.</dd>\r\n                        <dt>Head Tube:</dt>\r\n                        <dd>The length of the head tube.</dd>\r\n                    </dl>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>\r\n'}),n("text!views/frameAdmin.html",[],function(){return'<section>\r\n    <form class="form-horizontal">\r\n        <div class="control-group">\r\n            <label class="control-label" for="manufacturer">Manufacturer:</label>\r\n            <div class="controls">\r\n                <select class="input-large" id="manufacturer" data-bind="options: manufacturers, optionsText: \'name\', value: manu">\r\n                </select>\r\n            </div>\r\n        </div>\r\n    </form>\r\n    <div class="button-bar">\r\n        <button class="btn btn-info" data-bind="click: createNewModel, enable: canCreateNewModel"><i class="icon-plus"></i> Create New Model</button>\r\n        <button class="btn btn-info" data-bind="click: cancel, enable: canSave"><i class="icon-undo"></i> Cancel</button>\r\n        <button class="btn btn-info" data-bind="click: save, enable: canSave"><i class="icon-save"></i> Save</button>\r\n        <i class="icon-asterisk" data-bind="visible: hasChanges"></i>\r\n    </div>\r\n    <div data-bind="foreach: modelsWithSizes">\r\n        <legend data-bind="text: name"></legend>\r\n        <div class="form-inline">\r\n            <label>Model Name:</label>\r\n            <input class="input-small" data-bind="value: name" placeholder="Model Name"/>\r\n            <label>Release Date:</label>\r\n            <input class="input-small" data-bind="value: manufacturedStartDateFormatted"/>\r\n            <label>End Date:</label>\r\n            <input class="input-small" data-bind="value: manufacturedEndDateFormatted"/> \r\n            <button class="btn btn-info" data-bind="click: addNewSize"><i class="icon-plus"></i> Add New Size</button>\r\n        </div>\r\n        <table class="table table-striped table-bordered table-condensed">\r\n            <thead>\r\n                <tr>\r\n                    <th>Size</th>\r\n                    <th>Stack</th>\r\n                    <th>Reach</th>\r\n                    <th>BB Drop</th>\r\n                    <th>Head Tube Length</th>\r\n                    <th>Head Tube Angle</th>\r\n                    <th>Front Center</th>\r\n                    <th>Rear Center</th>\r\n                    <th>Min. Seat Angle</th>\r\n                    <th>Max. Seat Angle</th>\r\n                    <th>Wheel Size</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody data-bind="foreach: sizes">\r\n                <tr>\r\n                    <td>\r\n                        <input class="input-small" data-bind="value: size" placeholder="Size" /></td>\r\n                    <td>\r\n                        <input class="input-small" data-bind="value: stack" placeholder="Stack" /></td>\r\n                    <td>\r\n                        <input class="input-small" data-bind="value: reach" placeholder="Reach" /></td>\r\n                    <td>\r\n                        <input class="input-small" data-bind="value: bottomBracketDrop" placeholder="Reach" /></td>\r\n                    <td>\r\n                        <input class="input-small" data-bind="value: headTubeLength" placeholder="Head Tube Length" /></td>\r\n                    <td>\r\n                        <input class="input-small" data-bind="value: headTubeAngle" placeholder="Head Tube Angle" /></td>\r\n                    <td>\r\n                        <input class="input-small" data-bind="value: frontCenter" placeholder="Front Center" /></td>\r\n                    <td>\r\n                        <input class="input-small" data-bind="value: rearCenter" placeholder="Rear Center" /></td>\r\n                    <td>\r\n                        <input class="input-small" data-bind="value: minSeatAngle" placeholder="Min. Seat Angle" /></td>\r\n                    <td>\r\n                        <input class="input-small" data-bind="value: maxSeatAngle" placeholder="Max. Seat Angle" /></td>\r\n                    <td><select class="input-small" data-bind="options: $parents[1].wheelSizes(), optionsText: \'name\', optionsValue: \'value\', value: wheelSize"></select></td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</section>\r\n'}),n("text!views/frames.html",[],function(){return'<section>\r\n    <h2 class="page-title" data-bind="text: title"></h2>\r\n    <canvas id="bike3" width="500" height="250" class="frame-canvas">\r\n        <p>Your browser doesn\'t support canvas.</p>\r\n    </canvas>\r\n    <canvas id="bike2" width="500" height="250" class="frame-canvas">\r\n        <p>Your browser doesn\'t support canvas.</p>\r\n    </canvas>\r\n    <canvas id="bike1" width="500" height="250" class="frame-canvas">\r\n        <p>Your browser doesn\'t support canvas.</p>\r\n    </canvas>\r\n    <div class="row-fluid" style="margin-top: 215px;">\r\n        <div class="span4" data-bind="with: frame1">\r\n            <!--ko compose: {view: \'frameSelection\'} --><!--/ko-->\r\n        </div>\r\n        <div class="span4" data-bind="with: frame2">\r\n            <!--ko compose: {view: \'frameSelection\'} --><!--/ko-->\r\n        </div>\r\n        <div class="span4" data-bind="with: frame3">\r\n            <!--ko compose: {view: \'frameSelection\'} --><!--/ko-->\r\n        </div>\r\n    </div>\r\n</section>\r\n'}),n("text!views/frameSelection.html",[],function(){return'\r\n    <h3 class="text-center" data-bind="text: name, style: { color: color }"></h3>\r\n    <form class="form-horizontal">\r\n        <div class="control-group">\r\n            <label class="control-label" for="manufacturer">Manufacturer:</label>\r\n            <div class="controls">\r\n                <select class="input-medium" id="manufacturer" data-bind="options: $parent.manufacturers, optionsText: \'name\', value: manufacturer"></select>\r\n            </div>\r\n        </div>\r\n        <div class="control-group">\r\n            <label class="control-label" for="model">Model:</label>\r\n            <div class="controls">\r\n                <select class="input-medium" id="model" data-bind="options: models, optionsText: \'name\', value: model"></select>\r\n            </div>\r\n        </div>\r\n        <div class="control-group">\r\n            <label class="control-label" for="size">Size:</label>\r\n            <div class="controls">\r\n                <select class="input-medium" id="size" data-bind="options: sizes, optionsText: \'size\', value: size"></select>\r\n            </div>\r\n        </div>\r\n        <div data-bind="with: size">\r\n            <h3 class="text-center">Geometry</h3>\r\n            <dl class="dl-horizontal">\r\n                <dt>Stack:</dt>\r\n                <dd data-bind="text: stackFormatted"></dd>\r\n                <dt>Reach:</dt>\r\n                <dd data-bind="text: reachFormatted"></dd>\r\n                <dt>Front Center:</dt>\r\n                <dd data-bind="text: frontCenterFormatted"></dd>\r\n                <dt>Rear Center:</dt>\r\n                <dd data-bind="text: rearCenterFormatted"></dd>\r\n                <dt>Head Tube:</dt>\r\n                <dd data-bind="text: headTubeLengthFormatted"></dd>\r\n                <dt>Min Seat Angle:</dt>\r\n                <dd data-bind="text: minSeatAngleFormatted"></dd>\r\n                <dt>Min Seat Angle:</dt>\r\n                <dd data-bind="text: maxSeatAngleFormatted"></dd>\r\n                <dt>Wheel Size:</dt>\r\n                <dd data-bind="text: wheelSizeFormatted"></dd>\r\n            </dl>\r\n        </div>\r\n    </form>\r\n'}),n("text!views/login.html",[],function(){return'<section>\r\n    <div class="form-signin">\r\n        <h2 class="form-signin-heading">Please sign in</h2>\r\n        <input type="text" class="input-block-level" placeholder="Login" data-bind="value: userName">\r\n        <input type="password" class="input-block-level" placeholder="Password" data-bind="value: password">\r\n        <label class="checkbox">\r\n            <input type="checkbox" value="remember-me" data-bind="checked: rememberMe">\r\n            Remember me\r\n        </label>\r\n        <button class="btn btn-large btn-primary" data-bind="click: logIn">Sign in</button>\r\n        <!--<p>First time here? <a data-bind="click: register">Sign up</a></p>-->\r\n    </div>\r\n</section>'}),n("text!views/logout.html",[],function(){return""}),n("text!views/nav.html",[],function(){return'<nav class="navbar navbar-fixed-top">\r\n    <div class="navbar-inner">\r\n        <a class="brand" href="/">\r\n            <span class="title">My Tri Bike Fit</span> \r\n        </a>\r\n        <div class="btn-group" data-bind="foreach: router.visibleRoutes">\r\n            <a data-bind="css: { active: isActive }, attr: { href: hash }, html: caption" \r\n               class="btn btn-info" href="#"></a>\r\n        </div>\r\n        <div class="btn-group" data-bind="visible: isAdmin">\r\n            <a class="btn btn-info dropdown-toggle" data-toggle="dropdown">\r\n                <i class="icon-user"></i>\r\n                <span class="text">Admin</span><span class="caret"></span>\r\n            </a>\r\n            <ul class="dropdown-menu pull-right">\r\n                <!-- ko foreach: adminRoutes -->\r\n                <li><a data-bind="click: $parent.goToAdmin, html: caption" href="#"></a></li>\r\n                <!-- /ko -->\r\n            </ul>\r\n        </div>\r\n        <div class="loader pull-right" data-bind="css: { active: router.isNavigating }">\r\n            <div class="progress progress-striped active page-progress-bar">\r\n                <div class="bar" style="width: 100px;"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nav>'}),n("text!views/register.html",[],function(){return'<section>\r\n    <div class="form-signin">\r\n        <h2 class="form-signin-heading">Sign Up</h2>\r\n        <input type="text" class="input-block-level" placeholder="User Name" data-bind="value: userName">\r\n        <input type="password" class="input-block-level" placeholder="Password" data-bind="value: password">\r\n        <input type="password" class="input-block-level" placeholder="Confirm Password" data-bind="value: passwordConfirm">\r\n        <button class="btn btn-large btn-primary" data-bind="click: signUp">Sign up</button>\r\n    </div>\r\n</section>'}),n("text!views/shell.html",[],function(){return"<div>\r\n    <header>\r\n        <!--ko compose: {view: 'nav'} --><!--/ko-->\r\n    </header>\r\n     <section id=\"content\" class=\"main container-fluid\">\r\n        <!--ko compose: {model: router.activeItem, \r\n            afterCompose: router.afterCompose, \r\n            transition: 'entrance'} -->\r\n        <!--/ko-->\r\n    </section>\r\n</div>\r\n"}),t(["main"])})();